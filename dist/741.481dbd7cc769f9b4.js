"use strict";(self.webpackChunkemisora=self.webpackChunkemisora||[]).push([[741],{4741:(v,g,s)=>{s.r(g),s.d(g,{LoginModule:()=>b});var c=s(6895),i=s(4006),t=s(4650),d=s(49),l=s(8869),m=s(4366),u=s(5602);function p(n,r){if(1&n){const o=t.EpF();t.TgZ(0,"ngb-alert",16),t.NdJ("closed",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.close())}),t._uU(1),t.qZA()}if(2&n){const o=t.oxw();t.Q6J("type",o.alerts.type),t.xp6(1),t.Oqu(o.alerts.message)}}let f=(()=>{class n{constructor(o,e,a){this._formBuilder=o,this.userLogin=e,this.router=a,this.isNextDisabled=!0,this.passwordVisible=!1,this.form=this._formBuilder.group({email:["",i.kI.compose([i.kI.required])],password:["",i.kI.compose([i.kI.required])]}),this.form.valueChanges.subscribe(C=>{this.isNextDisabled=!this.form.valid})}setDataLogin(){this.userLogin.loginUser(this.form.value).subscribe(o=>{this.alerts={},this.userLogin.getCustomerByIdPoint(o.payload.user_data.punto_de_venta,o.payload.token).subscribe(e=>{this.setSessionLogin(o.payload,e.payload)})},o=>{this.alerts={type:"danger",message:"El usuario o contrase\xf1a no es v\xe1lido."},setTimeout(()=>{this.alerts=!1},2e3)})}setSessionLogin(o,e){localStorage.setItem("token-session",btoa(o.token)),localStorage.setItem("user-session",btoa(JSON.stringify(o.user_data))),localStorage.setItem("point-of-sale",btoa(JSON.stringify(e))),this.router.navigateByUrl("/")}close(){this.alerts={}}togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(i.qu),t.Y36(d.r),t.Y36(l.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-login"]],decls:21,vars:4,consts:[[1,"page-login"],[1,"main-content"],[1,"content-form"],["class","alert-login",3,"type","closed",4,"ngIf"],[1,"h3","mb-3","font-weight-normal"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],[1,"form-field","user"],["for","inputEmail",1,"sr-only"],["type","email","id","inputEmail","required","","autofocus","","formControlName","email",1,"form-control"],[1,"form-field","password"],["for","inputPassword",1,"sr-only"],["id","inputPassword","required","","formControlName","password",1,"form-control",3,"type"],[1,"show-password",3,"click"],[1,"button-submit"],["type","submit",1,"btn-submit",3,"disabled"],[1,"image-found"],[1,"alert-login",3,"type","closed"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,p,2,2,"ngb-alert",3),t.TgZ(4,"h3",4),t._uU(5,"Inicio de Sesi\xf3n"),t.qZA(),t.TgZ(6,"form",5),t.NdJ("ngSubmit",function(){return e.setDataLogin()}),t.TgZ(7,"div",6)(8,"label",7),t._uU(9,"Usuario"),t.qZA(),t._UZ(10,"input",8),t.qZA(),t.TgZ(11,"div",9)(12,"label",10),t._uU(13,"Contrase\xf1a"),t.qZA(),t._UZ(14,"input",11),t.TgZ(15,"mat-icon",12),t.NdJ("click",function(){return e.togglePasswordVisibility()}),t._uU(16,"visibility"),t.qZA()(),t.TgZ(17,"div",13)(18,"button",14),t._uU(19,"Ingresar"),t.qZA()()()(),t._UZ(20,"div",15),t.qZA()()),2&o&&(t.xp6(3),t.Q6J("ngIf",e.alerts),t.xp6(3),t.Q6J("formGroup",e.form),t.xp6(8),t.Q6J("type",e.passwordVisible?"text":"password"),t.xp6(4),t.Q6J("disabled",e.form.invalid||e.isNextDisabled))},dependencies:[c.O5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,m.Hw,u.xm],styles:[".page-login[_ngcontent-%COMP%]{height:100svh}.content-form[_ngcontent-%COMP%]{text-align:center}.main-content[_ngcontent-%COMP%]{display:flex;align-items:center}.main-content[_ngcontent-%COMP%]   .content-form[_ngcontent-%COMP%]{width:50%}.main-content[_ngcontent-%COMP%]   .content-form[_ngcontent-%COMP%]   .form-signin[_ngcontent-%COMP%]{padding:0 2rem;text-align:left;max-width:450px;margin:auto}.main-content[_ngcontent-%COMP%]   .image-found[_ngcontent-%COMP%]{width:50%;display:block;height:100%;background-image:url(login_bg.549c7d7e7c8e07f1.png);background-size:cover;background-position:center}.main-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block}.main-content[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{margin-bottom:20px;position:relative}.main-content[_ngcontent-%COMP%]   .show-password[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:10px;cursor:pointer}.alert-login[_ngcontent-%COMP%]{margin:1rem}"]}),n})(),h=(()=>{class n{constructor(o){this.router=o}canActivate(o,e){return this.isLoggedIn()}isLoggedIn(){return!localStorage.getItem("token-session")||this.router.navigateByUrl("/")}getLocalStorage(o){return localStorage.getItem(o)}}return n.\u0275fac=function(o){return new(o||n)(t.LFG(l.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),b=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,l.Bz.forChild([{path:"",component:f,canActivate:[h]}]),i.UX,m.Ps,u._A]}),n})()}}]);